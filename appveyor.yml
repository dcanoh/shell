version: 0.0.01-{build}

shallow_clone: true

environment:
  LUAROCKS_VER: 2.4.1
  LUA_VER: 5.1.4

platform:
  - x86

cache:
  - c:\lua -> appveyor.yml
  - c:\external -> appveyor.yml

install:
# Make compiler command line tools available
- call .appveyor\set_compiler_env.bat
# Setup Lua development/build environment
- call .appveyor\install.bat

build_script:
  - luarocks install luafilesystem
  - luarocks install https://raw.githubusercontent.com/lidesdk/framework/master/lide-0.0-0.rockspec

test_script:
# LOCAL LUAROCKS INSTALLATION: # - set LIDE_FRAMEWORK=C:\Users\appveyor\AppData\Roaming\luarocks\share\lua\5.1\lide
# global luarocks installation:
#- set LIDE_FRAMEWORK=c:\lua\%platform%\%LUA_VER%\LuaRocks\systree\share\lua\5.1\lide
#- .\lide.bat tests\windows_commandline_test.lua
  #- set LIDE_PATH=%CD%
  - set LIDE_PATH=C:\projects\commandline
  - lua tests\windows_commandline_test.lua